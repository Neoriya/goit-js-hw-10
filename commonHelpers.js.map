{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true, // Вмикає засіб вибору часу\n  time_24hr: true, //Відображає засіб вибору часу в 24-годинному режимі\n  defaultDate: new Date(), //Встановлює початкові вибрані дати.\n  minuteIncrement: 1, //Регулює крок для введення хвилин\n\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (userSelectedDate <= new Date()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        messageColor: 'rgba(255, 255, 255, 1)',\n        messageSize: '16px',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        messageLineHeight: '64px',\n      });\n      startBtn.disabled = true; // Деактивація кнопки \"СТАРТ\"\n    } else {\n      startBtn.disabled = false; // Активація кнопки \"СТАРТ\"\n    }\n\n    console.log(userSelectedDate);\n  },\n};\n\nlet flatpickrInstance = flatpickr('#datetime-picker', options);\n\nconst startBtn = document.querySelector('button[data-start]');\nconst calendar = document.querySelector('#datetime-picker');\n\nstartBtn.disabled = true;\n\n// ------------------------------------------------------------------------\n\nclass Timer {\n  constructor(convertFunction) {\n    // Додано параметр для збереження функції convertMs\n\n    this.isActive = false;\n    this.convertFunction = convertFunction; // Зберігаємо посилання на функцію\n    this.timerId = null; // Додано для зберігання id інтервалу\n  }\n\n  start() {\n    if (this.isActive) {\n      return;\n    }\n\n    const startTime = userSelectedDate.getTime();\n    this.isActive = true;\n\n    startBtn.disabled = true; // Деактивація кнопки\n    // calendar.disabled = true; // Деактивація календаря (не працює як мені треба)\n    calendar.classList.add('inactive'); // Додаємо клас 'inactive'\n    flatpickrInstance.destroy(); // Деактивація календаря\n\n    this.timerId = setInterval(() => {\n      const currentTime = Date.now();\n      const deltaTime = startTime - currentTime;\n      if (deltaTime <= 0) {\n        this.stop();\n        return;\n      }\n\n      const time = this.getTimeComponent(deltaTime); // Виклик функції convertMs\n      console.log(time);\n      updateTimerDisplay(time.days, time.hours, time.minutes, time.seconds);\n    }, 1000);\n  }\n\n  stop() {\n    clearInterval(this.timerId);\n    this.isActive = false;\n\n    flatpickrInstance = flatpickr('#datetime-picker', options); // Створення нового екземпляру flatpickr і оновлення посилання на нього\n    // calendar.disabled = false; // Активація календаря\n    calendar.classList.remove('inactive'); // Видаляємо клас 'inactive'\n    startBtn.disabled = true; // Активація кнопки\n  }\n\n  getTimeComponent(time) {\n    return this.convertFunction(time); // Викликаємо зовнішню функцію\n  }\n}\n\nconst timer = new Timer(convertMs); // Передаємо функцію convertMs під час створення екземпляра класу\n\nstartBtn.addEventListener('click', timer.start.bind(timer)); // Прив'язка методу start до екземпляра класу\n\n// ------------------------------------------------------------------------\n\nfunction convertMs(ms) {\n  // Кількість мілісекунд на одиницю часу\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day); // Решта днів\n  const hours = Math.floor((ms % day) / hour); // Решта годин\n  const minutes = Math.floor(((ms % day) % hour) / minute); // Решта хвилин\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second); // Решта секунд\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0'); // Додавання нуля в таймері\n}\n\n// ------------------------------------------------------------------------\n\n// Отримуємо посилання на всі елементи для відображення значень таймера\nconst daysElement = document.querySelector('[data-days]');\nconst hoursElement = document.querySelector('[data-hours]');\nconst minutesElement = document.querySelector('[data-minutes]');\nconst secondsElement = document.querySelector('[data-seconds]');\n\nfunction updateTimerDisplay(days, hours, minutes, seconds) {\n  // Оновлюємо значення елементів HTML\n  daysElement.textContent = addLeadingZero(days);\n  hoursElement.textContent = addLeadingZero(hours);\n  minutesElement.textContent = addLeadingZero(minutes);\n  secondsElement.textContent = addLeadingZero(seconds);\n}\n"],"names":["userSelectedDate","options","selectedDates","iziToast","startBtn","flatpickrInstance","flatpickr","calendar","Timer","convertFunction","startTime","currentTime","deltaTime","time","updateTimerDisplay","timer","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","daysElement","hoursElement","minutesElement","secondsElement"],"mappings":"8HAMA,IAAIA,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAE9BF,GAAoB,IAAI,MAC1BG,EAAS,MAAM,CACb,QAAS,qCACT,aAAc,yBACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,kBAAmB,MAC3B,CAAO,EACDC,EAAS,SAAW,IAEpBA,EAAS,SAAW,GAGtB,QAAQ,IAAIJ,CAAgB,CAC7B,CACH,EAEA,IAAIK,EAAoBC,EAAU,mBAAoBL,CAAO,EAE7D,MAAMG,EAAW,SAAS,cAAc,oBAAoB,EACtDG,EAAW,SAAS,cAAc,kBAAkB,EAE1DH,EAAS,SAAW,GAIpB,MAAMI,CAAM,CACV,YAAYC,EAAiB,CAG3B,KAAK,SAAW,GAChB,KAAK,gBAAkBA,EACvB,KAAK,QAAU,IAChB,CAED,OAAQ,CACN,GAAI,KAAK,SACP,OAGF,MAAMC,EAAYV,EAAiB,UACnC,KAAK,SAAW,GAEhBI,EAAS,SAAW,GAEpBG,EAAS,UAAU,IAAI,UAAU,EACjCF,EAAkB,QAAO,EAEzB,KAAK,QAAU,YAAY,IAAM,CAC/B,MAAMM,EAAc,KAAK,MACnBC,EAAYF,EAAYC,EAC9B,GAAIC,GAAa,EAAG,CAClB,KAAK,KAAI,EACT,MACD,CAED,MAAMC,EAAO,KAAK,iBAAiBD,CAAS,EAC5C,QAAQ,IAAIC,CAAI,EAChBC,EAAmBD,EAAK,KAAMA,EAAK,MAAOA,EAAK,QAASA,EAAK,OAAO,CACrE,EAAE,GAAI,CACR,CAED,MAAO,CACL,cAAc,KAAK,OAAO,EAC1B,KAAK,SAAW,GAEhBR,EAAoBC,EAAU,mBAAoBL,CAAO,EAEzDM,EAAS,UAAU,OAAO,UAAU,EACpCH,EAAS,SAAW,EACrB,CAED,iBAAiBS,EAAM,CACrB,OAAO,KAAK,gBAAgBA,CAAI,CACjC,CACH,CAEA,MAAME,EAAQ,IAAIP,EAAMQ,CAAS,EAEjCZ,EAAS,iBAAiB,QAASW,EAAM,MAAM,KAAKA,CAAK,CAAC,EAI1D,SAASC,EAAUC,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAKA,MAAMC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,SAASb,EAAmBI,EAAMC,EAAOC,EAASC,EAAS,CAEzDG,EAAY,YAAcF,EAAeJ,CAAI,EAC7CO,EAAa,YAAcH,EAAeH,CAAK,EAC/CO,EAAe,YAAcJ,EAAeF,CAAO,EACnDO,EAAe,YAAcL,EAAeD,CAAO,CACrD"}